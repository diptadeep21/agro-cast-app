version: 1

frontend:
  env:
    variables:
      NODE_ENV: production
      API_URL: https://api.example.com
  phases:
    preBuild:
      commands:
        - echo "PreBuild phase - checking for submodules"
        - |
          if [ -f .gitmodules ]; then
            echo "Found .gitmodules, updating submodules..."
            git submodule update --init --recursive || echo "Submodule update failed, continuing..."
          else
            echo "No .gitmodules found, skipping submodule update"
          fi
    build:
      commands:
        - npm install
        - npm run build
  artifacts:
    baseDirectory: build
    files:
      - "**/*"
  cache:
    paths: []
